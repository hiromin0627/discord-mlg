# discord-mlg
PythonベースのDiscord用ボットのアイドルマスターミリオンライブシアターデイズのガシャシミュレーターです。  
現状、Discord.pyが音声を二重再生させることができない（わからない）ため、BGMを鳴らす場合は2つのボットを作成する必要がある。
  
### MLG v5へようこそ
- 起動時に最新のMLGデータベースをロードします。
  - コマンドでロードするデータベースのバージョンを変えられます。
  - コマンドやConfigで勝手に更新せず、保存されているバージョンでロードするようにできます。
- 「MLupdate」と打ち込んでいただくと、最新のものをダウンロードすることができます。
- 「MLchange」で別のバージョンのデータベースを呼び出すこともできます。
  - バージョン名は以下のページで確認してください。
  - [日本語版](https://hiromin.xyz/content/discordmlg/databaselist.php)
  - [アジア版（韓国語版・中国語繁体字版）](https://hiromin.xyz/content/discordmlg/databaselist-asia.php)
  
## 詳しい情報
[こちら](https://hiromin.xyz/content/discordmlg/)のページで解説をしています。ご確認ください。  
  
## 導入方法
1. Python 3.7以降を導入してください。
1. 最新版のdiscord.py（v1.2.5以降）をインストールしてください。
1. ffmpegを導入し、PATHも通してください。
1. Discordのデベロッパーサイトからトークンを入手してください。
1. Discordのデベロッパーサイトにて招待リンクを作成し、使用予定のサーバーに導入してください（管理者権限持つのが一番楽）。
1. discord-mlgのconfig.iniにトークンとテキストチャンネルID（ガシャ結果ログ出力用）を入力してください。
    - BGMも使う場合は、トークン（BGMボット用）とテキストチャンネルID（Bot同士の会話用）を用意、入力してください。
1. main.pyをPythonで起動します（Windowsだったらrun.batファイルを使用できます）。
    - BGMを使用するならば、bgm.pyを起動します（Windowsならrun_bgm.batが使用できます）。
1. 素敵なガシャライフを！
[こちらのブログ](https://blog.hiromin.xyz/紹介/859)にて導入方法の解説をしています。

## 遊び方
- 「MLガシャ」または「MLgacha」、「ML轉蛋」、「ML촬영」と入力するとミリシタのガシャを引くことができます。  
- 「MLガシャ10」または「MLgacha10」、「ML轉蛋10」、「ML촬영10」のように入力すると10連ガシャになります。
- 先頭語の「ML」はConfig.iniで変更できます。
  
## コマンド
- MLガシャ or MLgacha or ML轉蛋 or ML촬영 : ミリシタのガシャを引くことができます。
- MLupdate：最新のミリシタガシャデータベースをダウンロードします。
- MLchange : 別のバージョンのデータベースを呼び出します。
- MLreset : 全ユーザーのガシャのカウント（ドリームスター）の数をリセットします。
- MLcard : ユーザーの持っているカードリストを確認します。
- MLpickup : 現在のピックアップカードを確認します。「cn」や「kr」などを言語省略語を入れると別の言語のガシャピックアップカードを確認できます。
- MLcall : カード名を入力することによってカード絵を確認します。ただし、「シアターデイズ」と「制服シリーズ」はアイドル名も必要です。
- MLuselatest：起動時に最新版をロードするようにConfigを書き換えます。
- MLretention：起動時に保存されているバージョンでロードするようにConfigを書き換えます。
  
### MLガシャのコマンドオプション  
- 「MLガシャ10」のように、コマンドに「10」を追加すると10連ガシャがプレイできます。  
- 「MLガシャcn」のように、コマンドに「ja」か「cn」か「kr」を追加すると他の国のガシャをプレイできます（v2.0.0以降）。
- 「ja」が日本語、「cn」が中国語繁体字、「kr」が韓国語です。
- これらのオプションは「MLガシャ10cn」のように併用可能です。

## 備考
### 中国語繁体字版と韓国語版の記録データの互換性
- 中国語繁体字版と韓国語版の記録データには互換性があります。
- ただし日本語版と中国語繁体字版と韓国語版の記録データには互換性がありませんので注意してください。
### 提供割合について
- それぞれの提供割合は元のミリシタと同じ割合に近くなるように設定されています。完全に同じというわけではありません。
- 限定復刻ガシャについて、ミリシタでは1日ずつ提供割合が変わりますが、こちらではその時に復刻しているカード全てが同じ割合になっています。
- 詳細な割合は以下の通りです（v4の場合）。
  - 0.99%：ピックアップSSRカード
  - 2.01%：ピックアップ以外のSSRカード
  - 2.40%：ピックアップSRカード
    - 無い場合は通常のSRカードを排出
  - 9.60%：ピックアップ以外のSRカード
  - 8.50%：ピックアップRカード
    - 無い場合は通常のRカードを排出
  - 76.50%：ピックアップ以外のRカード
- フェス開催中の詳細な割合は以下の通りです（v4の場合）。
  - 1.98%：ピックアップFESカード
  - 4.02%：ピックアップ以外のSSRカードとFESカード
  - 9.00%：SRカード
  - 85.00%：Rカード
  
## リンク
- [バージョン履歴はこちら](https://github.com/hiromin0627/discord-mlg/wiki/バージョン履歴)
- [GitHubページ](https://github.com/hiromin0627/discord-mlg)
- [アイドルマスターミリオンライブシアターデイズ公式ツイッター](https://twitter.com/imasml_theater)
- [韓国版アイドルマスターミリオンライブシアターデイズ公式ツイッター](https://twitter.com/imasmltd_kr)
- [中国語繁体字版アイドルマスターミリオンライブシアターデイズ公式FaceBook](https://www.facebook.com/idolmastermlTD.ch/)
- カード情報参考サイト [Fantasia | matsurihi.me](https://mltd.matsurihi.me/)
- カード情報参考・画像サイト [アイドルマスター ミリオンライブ！ シアターデイズDB【ミリシタDB】](https://imas.gamedbs.jp/mlth/)
